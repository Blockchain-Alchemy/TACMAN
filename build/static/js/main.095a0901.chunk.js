(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{181:function(e,t,n){},187:function(e,t){},189:function(e,t){},203:function(e,t){},205:function(e,t){},218:function(e,t){},276:function(e,t){},277:function(e,t){},306:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var r,c,a,o=n(13),s=n.n(o),i=n(158),l=n.n(i),u=(n(181),n(40)),d=n(71),b=n.n(d),j=n(18),x=n(3),f=(r={},Object(x.a)(r,u.b.MAINNET,{RpcUrl:"https://mainnet.smartpy.io",Market:"KT1P5Cvfu3TXzxPtowxND6gDfNxrzzkG8oyW",UUSD:"KT1XRPEPXbZK25r3Htzp2o1x7xdMMmfocKNW"}),Object(x.a)(r,u.b.JAKARTANET,{RpcUrl:"https://jakartanet.tezos.marigold.dev",Market:"",UUSD:""}),r),h=n(17),g=Object(o.createContext)({}),v=function(e){var t=e.value,n=e.children,r=Object(o.useState)(t),c=Object(j.a)(r,2),a=c[0],s=c[1],i=Object(o.useState)(f[t]),l=Object(j.a)(i,2),u=l[0],d=l[1];return Object(o.useEffect)((function(){d(f[a])}),[a]),Object(h.jsx)(g.Provider,{value:{networkType:a,config:u,setNetworkType:s},children:n})},p=n(0),O=n(51),m=n(166),w=n(52),k=Object(o.createContext)({}),y=[u.c.OPERATION_REQUEST,u.c.SIGN],N=function(e){var t=e.children,n=function(){var e=Object(o.useContext)(g);if(void 0===e)throw new Error("Network context undefined");return e}(),r=n.networkType,c=n.config,a=Object(o.useState)(new w.a(c.RpcUrl)),s=Object(j.a)(a,2),i=s[0],l=s[1],d=Object(o.useState)(),b=Object(j.a)(d,2),f=b[0],v=b[1],N=Object(o.useState)(void 0),T=Object(j.a)(N,2),C=T[0],S=T[1],P=Object(o.useState)(void 0),E=Object(j.a)(P,2),A=E[0],U=E[1],R=Object(o.useState)(!1),M=Object(j.a)(R,2),I=M[0],L=M[1];Object(o.useEffect)((function(){U(void 0),L(!1),l(new w.a(c.RpcUrl))}),[c]),Object(o.useEffect)((function(){Object(O.a)(Object(p.a)().mark((function e(){var t,n;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=3;break}return e.next=3,f.clearActiveAccount();case 3:n=new m.a({name:"GFT",preferredNetwork:r,disableDefaultEvents:!0,eventHandlers:(t={},Object(x.a)(t,u.a.PAIR_INIT,{handler:u.d.PAIR_INIT}),Object(x.a)(t,u.a.PAIR_SUCCESS,{handler:function(e){return console.log(e.publicKey)}}),t)}),console.log("setWalletProvider",n),i.setWalletProvider(n),v(n);case 7:case"end":return e.stop()}}),e)})))()}),[i,r]);var W=Object(o.useCallback)(Object(O.a)(Object(p.a)().mark((function e(){var t,n,a;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return",Promise.resolve(void 0));case 2:return e.prev=2,console.log("Request Permission",r,c.RpcUrl),e.next=6,f.client.requestPermissions({network:{type:r,rpcUrl:c.RpcUrl},scopes:y});case 6:return t=e.sent,n=t.accountInfo.publicKey,S(n),e.next=11,f.getPKH();case 11:return a=e.sent,U(a),L(!0),e.abrupt("return",i);case 17:e.prev=17,e.t0=e.catch(2),L(!1);case 20:case"end":return e.stop()}}),e,null,[[2,17]])}))),[i,f,r,c]),z=Object(o.useCallback)(Object(O.a)(Object(p.a)().mark((function e(){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(!1),U(void 0),!f){e.next=5;break}return e.next=5,f.clearActiveAccount();case 5:case"end":return e.stop()}}),e)}))),[f]);return Object(h.jsx)(k.Provider,{value:{tezos:i,wallet:f,connected:I,publicKey:C,address:A,connectWallet:W,disconnectWallet:z},children:t})},T=function(){var e=Object(o.useContext)(k);if(void 0===e)throw new Error("Wallet context undefined");return e},C=function(e){var t=e.children;return Object(h.jsxs)(v,{value:u.b.MAINNET,children:[Object(h.jsx)(d.Toaster,{position:"top-center"}),Object(h.jsx)(N,{children:t})]})},S=function(){var e=T(),t=e.address,n=e.connectWallet,r=e.disconnectWallet;return Object(h.jsx)("button",{className:"block px-6 py-2.5 mt-4 font-medium leading-5 text-center text-white capitalize bg-blue-600 rounded-lg lg:mt-0 hover:bg-blue-500 lg:w-auto",onClick:function(){t?r():n()},children:t?"Disconnect":"Connect Wallet"})},P=function(){return Object(h.jsxs)("nav",{className:"container p-6 mx-auto lg:flex lg:justify-between lg:items-center",children:[Object(h.jsxs)("div",{className:"flex items-center justify-between",children:[Object(h.jsx)("div",{children:Object(h.jsx)("a",{className:"text-2xl font-bold text-gray-800 dark:text-white lg:text-3xl hover:text-gray-700 dark:hover:text-gray-300",href:"/",children:"GFT - Gaming Framework for Tezos"})}),Object(h.jsx)("div",{className:"flex lg:hidden",children:Object(h.jsxs)("button",{type:"button",className:"text-gray-500 dark:text-gray-200 hover:text-gray-600 dark:hover:text-gray-400 focus:outline-none focus:text-gray-600 dark:focus:text-gray-400","aria-label":"toggle menu",children:[Object(h.jsx)("svg",{"x-show":"!isOpen",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 8h16M4 16h16"})}),Object(h.jsx)("svg",{"x-show":"isOpen",xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:Object(h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})]})})]}),Object(h.jsxs)("div",{className:"absolute inset-x-0 z-20 w-full px-6 py-4 transition-all duration-300 ease-in-out bg-white shadow-md lg:bg-transparent lg:dark:bg-transparent lg:shadow-none dark:bg-gray-900 lg:mt-0 lg:p-0 lg:top-0 lg:relative lg:w-auto lg:opacity-100 lg:translate-x-0 lg:flex lg:items-center",children:[Object(h.jsxs)("div",{className:"flex flex-col space-y-4 lg:mt-0 lg:flex-row lg:-px-8 lg:space-y-0",children:[Object(h.jsx)("a",{className:"text-gray-700 transition-colors duration-300 transform lg:mx-8 dark:text-gray-200 dark:hover:text-blue-400 hover:text-blue-500",href:"https://github.com/Blockchain-Alchemy/GFT",children:"Github Repo"}),Object(h.jsx)("a",{className:"text-gray-700 transition-colors duration-300 transform lg:mx-8 dark:text-gray-200 dark:hover:text-blue-400 hover:text-blue-500",href:"https://github.com/Blockchain-Alchemy/GFT#readme",children:"Readme"}),Object(h.jsx)("a",{className:"text-gray-700 transition-colors duration-300 transform lg:mx-8 dark:text-gray-200 dark:hover:text-blue-400 hover:text-blue-500",href:"https://medium.com/@Dreitser/gtf-gaming-framework-for-tezos-b69d37cca891",children:"Medium Article"}),Object(h.jsx)("a",{className:"text-gray-700 transition-colors duration-300 transform lg:mx-8 dark:text-gray-200 dark:hover:text-blue-400 hover:text-blue-500",href:"https://blockalc.com/pages/contact",children:"Contact"})]}),Object(h.jsx)(S,{})]})]})},E=n(90),A=Object(o.createContext)({}),U=function(e){var t=e.unityConfig,n=e.children,r=Object(E.useUnityContext)(t);return Object(h.jsx)(A.Provider,{value:{unityContext:r},children:n})},R=n(103),M=n(104),I=M.a.div(c||(c=Object(R.a)(["\n  display: flex;\n  justify-content: center;\n  min-height: 540px;\n  position: relative;\n"]))),L=M.a.div(a||(a=Object(R.a)(["\n  position: absolute;\n  left: 50%;\n  top: 45%;\n  transform: translate(-50%, -50%);\n  color: white;\n  font-size: 16px;\n  text-align: center;\n  font-weight: 500;\n"]))),W=function(e){var t=e.unityContext,n=e.eventListeners,r=e.styles,c=t.isLoaded,a=t.loadingProgression;return Object(o.useEffect)((function(){var e=t.addEventListener,r=t.removeEventListener;return null===n||void 0===n||n.forEach((function(t){e(t.eventName,t.callback)})),function(){null===n||void 0===n||n.forEach((function(e){r(e.eventName,e.callback)}))}}),[t,n]),Object(h.jsxs)(I,{children:[Object(h.jsx)(E.Unity,{unityProvider:t.unityProvider,style:r}),!c&&a>0&&Object(h.jsx)(L,{children:Object(h.jsxs)("div",{children:["Loading... ",Math.round(100*a),"%"]})})]})},z=function(){var e=T(),t=e.tezos,n=e.connectWallet,r=function(){var e=Object(o.useContext)(A);if(void 0===e)throw new Error("Wallet context undefined");return e}(),c=r.unityContext,a=c.sendMessage,s=Object(o.useCallback)(function(){var e=Object(O.a)(Object(p.a)().mark((function e(r){var c;return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("onSendTransaction",r),e.next=4,n();case 4:return console.log("Request Transaction",r),e.next=7,t.wallet.transfer({to:"tz1M2hCvF5AhhbQAkn3LcZ8DTNBggyAKTCvo",amount:r}).send();case 7:return c=e.sent,e.next=10,c.confirmation();case 10:return a("GFT","TransactionComplete"),b.a.success("Transaction Success"),e.abrupt("return");case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0),b.a.error("Something went wrong"),a("GFT","TransactionFailed");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),[t,n,a]),i=Object(o.useCallback)(function(){var e=Object(O.a)(Object(p.a)().mark((function e(t){return Object(p.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onSendScore",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),l=Object(o.useMemo)((function(){return[{eventName:"SendTransaction",callback:s},{eventName:"SendScore",callback:i}]}),[s,i]);return Object(h.jsx)("div",{className:"container mx-auto mt-4 fullscreen",children:Object(h.jsx)(W,{unityContext:c,eventListeners:l,styles:{height:540,width:950,background:"#555"}})})},F={loaderUrl:"Build/public.loader.js",dataUrl:"Build/public.data.unityweb",frameworkUrl:"Build/public.framework.js.unityweb",codeUrl:"Build/public.wasm.unityweb"},B=function(){return Object(h.jsx)(U,{unityConfig:F,children:Object(h.jsx)(z,{})})};n(306);var G=function(){return Object(h.jsxs)(C,{children:[Object(h.jsx)(P,{}),Object(h.jsx)(B,{})]})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,311)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};l.a.createRoot(document.getElementById("root")).render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(C,{children:Object(h.jsx)(G,{})})})),K()}},[[307,1,2]]]);
//# sourceMappingURL=main.095a0901.chunk.js.map